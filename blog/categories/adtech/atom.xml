<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: adtech | adtech周辺に興味がある人の四方山話]]></title>
  <link href="http://rindai87.github.com/blog/categories/adtech/atom.xml" rel="self"/>
  <link href="http://rindai87.github.com/"/>
  <updated>2013-04-09T00:50:48+09:00</updated>
  <id>http://rindai87.github.com/</id>
  <author>
    <name><![CDATA[Norihiro Shimoda]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[QuoraでのDMPに関する質問をあさってみた]]></title>
    <link href="http://rindai87.github.com/blog/2013/04/09/dmp-information-in-quora/"/>
    <updated>2013-04-09T00:25:00+09:00</updated>
    <id>http://rindai87.github.com/blog/2013/04/09/dmp-information-in-quora</id>
    <content type="html"><![CDATA[<p>DMPの仕組みについてはだいたい妄想と気合で補完できるようになってきたのでだいたい一段落してきましたが、一方でビジネスモデルについては依然としてはっきりしていません。なので、深夜のテンションにまかせてQuoraを漁りまくったところ、色々と情報が見つかったのでまとめてみます。</p>

<h2>DMPってそもそもなによ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/Data-Management-Platform-DMP/What-is-the-market-size-for-Data-Management-Platforms">What is the market size for Data Management Platform</a>

<ul>
<li>具体的な数字が出てくるわけではない</li>
<li>Adobe, Krux, Bluekai, Lotameなど本当のDMPは数少ない</li>
<li>AudienceScienceなどのみせかけのDMP(DMP専業じゃないってこと？)もいくつかあり、DSPやタグマネジメントなどが主たる事業となっている</li>
<li>月間100万ユーザーに満たなくてもデータをDMPに売ればコストが発生せずに価値が生まれるので、企業がためらう理由がなくどんどん進んでいくだろうね</li>
</ul>
</li>
</ul>


<h2>Audience Targetingの平均的なCPMってどれくらいよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/Whats-the-average-CPM-for-audience-targeting-using-data-exchanges-and-reselling-display-advertising">What's the average CPM for audience targeting (using data exchanges and reselling display advertising)?</a>

<ul>
<li>リタゲのCPMはだいたい$2。いいオーディエンスターゲティングで$5-7あたり。すんごいよければ$20とかいくのでは、という回答。</li>
</ul>
</li>
</ul>


<h2>LotameとかeXelateなんかのDMPのコストはおいくらよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/Data-Management-Platform-DMP/How-much-does-a-DMP-like-Lotame-or-Exelate-cost-Assuming-Im-a-10M-unique-visitor-per-month-website-editor-what-would-I-pay">How much does a DMP like Lotame or Exelate cost? Assuming I'm a 10M unique visitor per month website editor</a>

<ul>
<li>Lotameのディレクターが答えている</li>
<li>DMPを使って作られたオーディエンスをターゲットとするimpressionはCPMベースのプライシングである。Webサイトのボリュームによるが最低$5000のコストでいける。</li>
<li>Lotameのディレクターとは別の人が答えていて、よくあるのは媒体がデータをDMPやDataExcahngeに提供した時には50%のレベシェア

<ul>
<li>DMPからデータを買った広告主に対するデータのコストはCPMの20%</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>DMP使ったことある人は各社のいいとこ悪いところを教えてよ？という質問</h2>

<ul>
<li><a href="http://www.quora.com/Data-Management-Platform-DMP/Has-anyone-experience-using-Data-Management-Platforms-Which-pros-and-cons-would-you-highlight-on-providers-like-Red-Aril-Krux-Demdex-Lotame-AudienceScience-Collective-Dataxu-Turn-X+1-exelate-Bluekai-or-others">Has anyone experience using Data Management Platforms ? Which pros and cons would you highlight on providers like Red Aril, Krux, Demdex, Lotame, AudienceScience, Collective, Dataxu, Turn, X+1, exelate, Bluekai or others?</a>

<ul>
<li><a href="http://www.bluekai.com/files/Case_Study_HP_Deploys_A.pdf">HPがBlukaiを活用したCaseStudyのリンク</a>が貼られていた</li>
</ul>
</li>
</ul>


<h2>Bluekaiのお値段っていくらよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/How-does-BlueKai-price-his-data">How does Bluekai price its data?</a>

<ul>
<li>Bluekaiは"stamps"かCPM毎の値段のプライシング</li>
<li>stampの値段は様々どんなデータかで変わる。典型的にはトータルのCPMの15%～20%</li>
<li>Ad Exchangeでは固定CPMでデータを提供している。</li>
</ul>
</li>
</ul>


<h2>Bluekaiの競合はどこよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/Who-competes-with-BlueKai">Who competes with BlueKai?</a>

<ul>
<li>DMP等の競合。少し古いので今はいなくなってるプレイヤーもいる</li>
</ul>
</li>
</ul>


<h2>marketplaceというデータ売り買いするビジネスモデルってどんなんよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/Data-Markets/What-are-the-basic-business-models-of-ad-data-marketplaces-like-Brilig-eXelate-and-BlueKai">What are the basic business models of ad data "marketplaces" like Brilig, eXelate, and BlueKai?</a>

<ul>
<li>Quoraの回答に<a href="http://www.nytimes.com/2009/03/26/business/media/26adco.html">リンク</a>が貼られていた</li>
</ul>
</li>
</ul>


<h2>BluekaiとかeXelateのビジネスモデルってどんなんよ？的な質問</h2>

<ul>
<li><a href="http://www.quora.com/What-are-Bluekai-and-Exelates-Business-Models-What-of-share-of-spend-do-they-retain">What are Bluekai and Exelate's Business Models?  What % of 'share of spend' do they retain?</a>

<ul>
<li>メディアバイヤーに望むターゲットセグメントのCPU(Cost Per Uniques)でチャージしている</li>
</ul>
</li>
</ul>


<h2>上記の質問をみていて補足的に調べた事</h2>

<h3>Bluekaiのstampについて</h3>

<ul>
<li><a href="http://blogs.bluekai.com/wp-content/uploads/2011/11/BlueKai-Glossary.pdf">BlueKai提供の用語集</a>

<ul>
<li>ビーコンとほぼ同じ意味っぽい</li>
</ul>
</li>
</ul>


<h3>Bluekaiについての日本語の記事</h3>

<ul>
<li><a href="http://startup-lab.tumblr.com/post/29950570185/bluekai">あなたのデータも取られてる？【BlueKai】に学ぶ日米の差</a></li>
</ul>


<h3>パーソナルデータに関するビジネスモデルの話（おまけ）</h3>

<ul>
<li><a href="http://www.meti.go.jp/committee/kenkyukai/shoujo/it_yugo_forum_data_wg2/pdf/001_04_00.pdf">経産省：パーソナルデータに関する海外動向</a>

<ul>
<li>偶然見つけたけど、経産省がこんな調査をしていたとは大変以外でした</li>
</ul>
</li>
</ul>


<h2>まとめ</h2>

<p>記事の間を補完すると、媒体がデータ提供して、DMPがDSPとかにデータ売るときのビジネスモデルが想像出来そうな感じがしますね。Quora++。ただ、個人的には、経産省のスライドが一番おもしろかったです。一読の価値ありですね。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[データビジネスの今後について考えてみた]]></title>
    <link href="http://rindai87.github.com/blog/2013/04/04/new-dmp-system/"/>
    <updated>2013-04-04T02:41:00+09:00</updated>
    <id>http://rindai87.github.com/blog/2013/04/04/new-dmp-system</id>
    <content type="html"><![CDATA[<p>4月に入ってから各社がDMPに関係するプレスリリースラッシュとなっていて、個人的には一気にDMPを始めとするデジタルマーケティング業界が盛り上がってきている感じがあります。</p>

<ul>
<li><a href="http://www.dac.co.jp/press/2013/AudienceOne.html">DAC</a></li>
<li><a href="http://www.platform-id.jp/releses/20130401_GR_PI_XROST_DMP.pdf">Platform ID</a></li>
<li><a href="http://prtimes.jp/main/html/rd/p/000000002.000006798.html">FreakOut</a></li>
<li><a href="http://www.microad.co.jp/news/release/detail.php?newid=News-0203">MicroAd</a></li>
<li><a href="http://prtimes.jp/main/html/rd/p/000000001.000007120.html">オウルデータ</a></li>
</ul>


<p>各社まさに、乗るしかない！このビッグウェーブに！！状態な感じが伺えます。</p>

<p>少しタイミングはズレていますがFacebookも<a href="http://jp.techcrunch.com/2013/02/28/20130227facebook-ad-data-providers/">Custom Audience</a>という外部オーディエンスをFacebookに取り込むサービスや、<a href="http://thenextweb.com/facebook/2013/03/19/facebook-announces-lookalike-audiences-lets-advertisers-target-potential-customers-similar-to-current-ones/">Lookalike Audience</a>という取り込んだオーディエンスを拡張するようなサービスを提供しています。</p>

<p><a href="http://g-yokai.com/2013/01/2013.php">2013年はDMP始動の年だ</a>、という予言がまさに実現に近づきつつあるのでしょうか？</p>

<p>そして、先日、このDMPラッシュの集大成とも言えそうな<a href="http://www.attribution.jp/000198.html">大変濃密かつ重厚な対談記事</a>が出ました。この記事、めちゃくちゃおもしろい。<a href="http://www.amazon.co.jp/gp/product/4864780013/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4864780013&amp;linkCode=as2&amp;tag=rindai87-22">DSP/DMPの本</a>を書き、<a href="http://g-yokai.com/">業界関係者必読ブログ</a>を書いてらっしゃるような、まさに業界のトップとも言える人が、先進的な事を発信し続けているのは大変素晴らしいし、ワクワクするなぁと思っています。</p>

<p>なのですが。。。やはり今の流れでは、本当の意味でのデータビジネスは広がりにくいのかなぁと考えています。とはいえ、明確にこうだ、というのがあるわけではなく、なんとなくモヤモヤしている状態です。
先日、同僚であるところの<a href="https://twitter.com/ritou">@ritou</a>さんと話していて少し腹落ちできた部分もあるので、つらつらと書いてみます。</p>

<h2>はじめに</h2>

<p>僕は、いわゆるIdentity系と言われる、広告業界の方から見ると声が大きいと感じてしまう人たちと関わることもあれば、広告のお仕事をする機会も多いです。広告系の方は炎上が起きるかもしれないことを「なんとなく」恐れていますし、一方でIdentity系の人は「なんとなく」広告系は好きじゃない(はっきりとした理由があることも多いです)、という構図ができています。</p>

<p>それぞれの「なんとなく」を明確にするために、私見ですが考え方をまとめてみました。</p>

<h3>広告系の人たち</h3>

<ul>
<li>もちろんプライバシーや個人情報にはしっかり配慮したい</li>
<li>が、実際にその辺の線引がよく分からない。明確なルールがない</li>
<li>個人に紐づくID的なものをマスクしていれば個人情報にあたらないよね？だからその範囲で使えるデータはどんどん使っていきたい</li>
<li>アドテク/デジタルマーケティングの時代が来る。もっとデータを使ったビジネスを展開していきたい</li>
<li>でも、炎上は怖い。そして、Identity系の人には何かやるとすぐ怒られて一気に炎上しちゃうイメージ</li>
</ul>


<h3>Identity系の人たち</h3>

<ul>
<li>個人の情報は個人の意思で適切に管理されるべき</li>
<li>データ保持者の同意のもと、同意した範囲の情報が他システムに適切なルールで提供されるのは問題ない</li>
<li>適切なルールと仕組みのもとであれば、むしろそういったデータ連携の動きは積極的に進めてもいいのではないか</li>
<li>広告系の人が何をやっているのかよく分からない</li>
</ul>


<h2>溝は深そうですね</h2>

<p>双方の考えは真逆です。ただ、0か1かという議論は建設的ではなく、その間の落とし所を真剣に考えるべきなんじゃないかと思うのです。</p>

<p>まず、データの第三者提供に関しては、法律的な問題はクリアしているとしても、個人の感情的な部分はクリアされていない場合が多いと思います。例えば、ユーザーが同意したとしてもそれが本当に理解した上での同意なのか？、データの収集はどこまで行われているのか？、集めたデータをどう使われているのか？ etc...です。</p>

<p>この問題は個人の信条などにも関わってくるので、万人が納得するような答えはないと思いますが、最低限「どんなデータを収集していて」、「どのようにデータを使っている/どのようなデータを流通させているのか」をユーザーにわかりやすい形で明示するのが必要と思います。プライバシーポリシーを読めば分かる、といえばそうかもしれないのですが、大半の人はプライバシーポリシーからデータに関して思いを馳せる、なんてことはしなさそうです。</p>

<h2>落とし所を仕組み化する</h2>

<p>前置きが長くなりましたが、次のようなデータ収集/提供の仕組みであれば比較的納得感があるのではないでしょうか？
ここで言うDMPとは、ファーストパーティの情報を扱うだけでなく、サードパーティへのデータ提供、サードパーティからのデータ取得も扱うことを前提とした広義のDMPになります。
妄想している機能としては以下のものです。（本当は図に落とした方がいいのですが、眠いしうまく絵にできる気がしない。。。）</p>

<ul>
<li>これまで通りCookieSyncなりなんなりでIDを交換してシステム間で連携

<ul>
<li>あとはお互いのプライバシーポリシーや利用規約に反しない範囲で適切にデータを交換します</li>
</ul>
</li>
<li><strong>(New)</strong>DMPはユーザーに収集している情報を提示するサービスを提供します

<ul>
<li>具体的には、来訪したユーザーに対して「当システムにおけるID○○のあなたについては、我々は今こんなデータを保有しています」「ID○○さんに関して保有しているデータは、このような形式で第三者に提供しています」というのを可視化するサービスです</li>
<li>ユーザーはその情報を見た上で、そのように情報を収集してほしくない/情報を第三者に提供してほしくない(オプトアウト)ということを選べます</li>
<li>さらにユーザーが望めば、より精緻な情報を取得/精緻な形で情報を第三者に提供(オプトイン)を行えます。その場合は、ユーザーには何らかのメリットを与える必要があるでしょう。例えばポイントなど。</li>
<li>ただし、大半のユーザーはオプトインもオプトアウトも選ばない可能性が高いので、デフォルトでは、一定レベル以上のの匿名化/統計化した情報を第三者に提供する、という形にします</li>
</ul>
</li>
</ul>


<p>ユーザーにデータの取得/流通についてのコントロール権を与えつつ、最低限のレベルではデータ活用/流通を行える気がします。また、望むユーザーに関しては自分のデータを対価にすることでより詳細な情報の活用/提供が可能になります。DMPはシステムの後ろにいるのではなく、積極的に前に出てくることも必要なのではないでしょうか。</p>

<p>類似したポイントサービスはすでに多く存在すると思いますが、どんなデータが取られていて、どの粒度でデータ提供されているのか、を明示しているサービスはないと思います。このスキームがうまくいくなら、場合によっては望んだユーザーの購買履歴や決済情報などのよりクリティカルな流通させることができるかもしれませんね。それはそれでまた別の問題も発生してきそうですが。。。</p>

<h2>まとめ</h2>

<p>なんとなく問題意識として持っていることに関してつらつらと書いただけなのですが</p>

<ul>
<li>法律的には大丈夫かもしれないが、感情的な部分をケアするようなものが仕組みに含まれいたほうがいい</li>
<li>もっとデータ活用している企業は前に出て来た方がいい</li>
<li>アーキテクチャや制度も含めて、もっといろんなところを巻き込んで議論していった方がいい</li>
</ul>


<p>というのを痛烈に感じています。よく分からないしきキモいし怖い、という論調が大きくなりデータ活用が盛り上がらないのが一番悲しいですね。</p>

<p>今の営業的というかマーケティング的な方面ドリブンでデータを活用していってやろうというのもすごく重要なのですが、割と重要なところを議論せずにどんどん進んでいる気がしてなりません。もちろん、真剣に議論していくとなかなか大変そうですが、その中から現状を突き破るようなデータビジネスのイノベーションがあるような気がしています。</p>

<p>とはいえ、この文章も半分勢いで書いているのでうまく言いたいことが言えてない気がしますし、自分自身まだまだ考えが足りてないところだらけなので、たっぷり議論したいですね。<a href="https://twitter.com/rindai87">twitter</a>や<a href="http://www.facebook.com/rindai87">Facebook</a>で適当に声をかけてもらえるとうれしいです。</p>

<h2>余談</h2>

<p>ここまで書いてきて、ああ、これって前に行った勉強会で聞いて考えたことの続きだなーと思いました。</p>

<ul>
<li><a href="http://rindai87.github.com/blog/2012/12/06/go-to-jotsugakkai-study/">情報知財研究会に行ってきた話</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[「インタレストターゲティングリニューアルの裏側」の裏側〜または2012年の振り返り〜]]></title>
    <link href="http://rindai87.github.com/blog/2012/12/31/summary-of-2012/"/>
    <updated>2012-12-31T21:14:00+09:00</updated>
    <id>http://rindai87.github.com/blog/2012/12/31/summary-of-2012</id>
    <content type="html"><![CDATA[<p>先日、<a href="http://alpha.mixi.co.jp/2012/11563/">「インタレストターゲティング」リニューアルの裏側</a>という記事を弊社エンジニアブログに書きました。エンジニアブログという制約上語れなかった話などをおりまぜて今年のまとめ的な話をしてみたいと思います。</p>

<p>今年は、年明け早々はいわゆるソーシャルグラフな話に取り組んでいましたが、途中からはインタレストターゲティング色が濃ゆくなり、後半にアドテクに出会ったという新しい興味に出会った一年でした。</p>

<h2>インタレストターゲティングに出会う</h2>

<p>今年の少し暖かくなったころにインタレストターゲティングのリニューアル案件に出会いました。正直、この案件の話があった時には広告自体に興味はなかったたので、まあそういう案件か、くらいのノリでした。</p>

<h2>データマイニング要素なくしました</h2>

<p>実は記事をよく読んでもらえると分かるのですが、実は僕達の取り組みは、クラスタリングというブラックボックスを取り払っているので、データマイニング要素を無くしているのです。</p>

<ul>
<li>データマイニングというブラックボックス要素を排除することで柔軟に商品作成が可能になる</li>
<li>オペレーターが作成した広告商品はすぐに販売可能にする</li>
</ul>


<p>の２点に注力した改修でした。クラスタリングを排除した理由としては、関連するものを集めるという処理は変わらないので効果は変わらないはずで、人間が細かくチューニング出来る要素を残したほうがむしろ効果は上がるのではないかという仮説にしたがったものでした。</p>

<p>商品作成の手間が従来よりも多少かかってしまうという課題が残りましたが（のちに<a href="https://twitter.com/kimuras">@kimuras</a>さんによる商品半自動作成機能を追加することで大幅に改善された）、今までなかった機能を追加したりしています（想定impression算出機能など）ので、それを補って余りあるのではないかなと思っています。</p>

<p>プロジェクト自体は途中で主要メンバーが抜けたり、クライアントテストの実施の際にバグが見つかったりと紆余曲折を経ましたが無事に終わったと思います。今の会社に入って、がっつりとゼロから機能を作ってリリースするのは初めてだったので、システム開発としてすごく勉強になりました。また、何より、Hiveを活用した機能を作れたのは自分の中で大きかったです。Hive（というかHadoop)むずかしいですねぇ。この辺の話はまたエンジニアブログに書くと思います。</p>

<h2>アドテクに出会う</h2>

<p>もはや記憶は定かではないのですが、夏ごろに「RTB」という言葉に出会ったと思います。やけに三文字のアルファベットを連発してきて頭に入りにくいし、前職で広告関連のトラブルに巻き込まれることが多かったために、そもそもWeb広告にいい印象を持っていなかったために、第一印象はふーん、な感じでした。が、その頃、もはやこれもきっかけは忘れましたが<a href="https://twitter.com/8maki">@8maki</a>と話すことが多くなり（<a href="http://fout.jp/">FreakOut</a>と昔オフィスが一緒だった関係なのか、@8makiはRTBまわりに詳しかった）、<a href="http://gihyo.jp/magazine/wdpress/archive/2012/vol70">Web + DB PRESS Vol.70</a>にアドテクの記事があったりと、徐々にRTBの知識をつけていくに至ります。</p>

<p>秋になっても流れが続きます。9月に前職の同僚がなんとFreakOutに入社!、10月に<a href="http://www.adtech-tokyo.com/ja/">ad:tech tokyo</a>に参加して色々見て回って意識が高まりました。そして、この頃にDMPという概念に出会います。</p>

<h2>DMP</h2>

<p>DMP、すごく興味深いなぁと思っています。自分が興味を持って勉強していく過程などは過去記事を見ていただければ。<a href="http://rindai87.github.com/blog/2012/11/19/how-to-collect-in-offline/">これ</a>とか<a href="http://rindai87.github.com/blog/2012/12/15/introduction-of-dmp/">これ</a>とか。</p>

<p>なんとも言えないのですが、昔からデータを活用して何かできるといいなぁと思っていたことのどんぴしゃな感じがたまりません。データを提供してマネタイズしたところとデータを欲しているところが確実に存在しており、市場原理的にはもっと盛り上がっても良さそうなのに、実際はそうなっていない裏側には、非常にセンシティブな割にルールが曖昧だということがあるのでしょう。幸運なことに、今所属しているグループにはセキュリティとidentityに大変詳しい方がいらっしゃるので、勉強の機会には事欠きません。今後どうなっていくのかは引き続き追いかけたいと思います。</p>

<h2>RTBとインタレストターゲティング</h2>

<p>（ここから先は僕個人が思うところで、会社の動きとは関係ありません。あしからず。メディアに身を置くものが考えてみました、的なノリですね。）</p>

<p>で、ぐるっとまわってインタレストターゲティングに戻ってきます。インタレストターゲティング単体だったら、それはまあひとつの広告商品で終わりなんですが、さらに何か活用できないかなーと思っています。</p>

<p>今のRTBの流れは（自分が知るかぎりでは）、3rd partyのデータをいかに1st partyと組み合わせて活用するか、という点に重きが置かれている部分が強いのかな、と思っています。と、なると1st partyのデータの重みは必然的に小さくなるなぁと感じています。大量のデータをかき集めればこれまで分からなかったことがわかったり、できなかったことができるはず、という、いわゆるビッグデータ時代的な観点では間違ってない流れなんでしょうが、どうもメディアという観点ではこの流れにただ乗っかるのはどうなんだろうと思っていました。</p>

<h3>Facebook Exchange</h3>

<p>で、そのようなことを悶々と思っている時に、やっぱりやってくれました。Facebookさんです。<a href="http://marketingland.com/facebook-ad-exchange-fbx-opens-for-business-with-16-partners-21490">Facebook Exchange</a>で効果が高かったよ、という話がありました。FacebookのCookie情報を軸として外部のCookie情報を集めて「Facebook内の広告」に活用する。ああ、これはうまいし、やっぱり効果が出るんだなぁと思いました。メディア側もクリエイティブの強化に加えて、RTBの仕組みの中でうまく自分たちの集客性やユーザー特性を利用した仕組みを作ることでまだまだ可能性があると思わせてくれた事例だと思います。</p>

<h2>そんなこんなで</h2>

<p>なんとなく始まった案件をきっかけに、すごく勉強になった一年でした。来年も広告に関わるかは正直わかりませんが、どんなことでもまあ楽しくやれそうな気がします。もともとスタートアップとかが好きな人間なので、まだ成熟していない分野を色々調べて妄想するのはとても楽しいですね。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[グループの勉強会での資料を公開します]]></title>
    <link href="http://rindai87.github.com/blog/2012/12/15/introduction-of-dmp/"/>
    <updated>2012-12-15T02:18:00+09:00</updated>
    <id>http://rindai87.github.com/blog/2012/12/15/introduction-of-dmp</id>
    <content type="html"><![CDATA[<h2>あらまし</h2>

<p>僕が所属しているグループでは週に一度持ち回りで最近の取り組んでいるタスクの話や今興味のあることなどを20分ほど話す勉強会があります。</p>

<p>昨日が僕のターンで、最近もっぱらDMPに興味があって一日の1/3くらいはDMPの事を考えているので、DMPについてこれまで調べたこと＋最近考えていることなどをまとめました。機密情報でもないし、せっかくなので資料を公開しておきます。</p>

<p>仰々しいタイトルになっていますが、中身はいたってカジュアルな感じです。</p>

<script async class="speakerdeck-embed" data-id="ccf0bd70283a01309a0622000a9d06b3" data-ratio="1.41436464088398" src="http://rindai87.github.com//speakerdeck.com/assets/embed.js"></script>


<p>スライドの最後に書いていますが、実際に仕事として携わっていない中、独力で「調査」を進めるのはそろそろ限界かなーという感じです。これからは、調べたことを元に要素技術で色々遊んでいこうと思います。</p>

<h2>CookieSync</h2>

<p>CookieSync自体の是非はともかく、発想は非常に面白いなーと思っています。セキュリティやidentity系では昔からこの手の話題はつきないようで、自分は今までそこまでidentityに興味はありませんでしたが、最近、徐々に興味を持って勉強するようになっています。理解を深めるために、一度サンプルくらいは実装してみる必要があるなと感じています。</p>

<h2>プライバシー保護データマイニング</h2>

<p>こういう学問があるのは知っていましたが、実際に利用するシーンが思いつかず手付かずになっていた分野です。DMPについて調べれば調べるほど、今後重要になっていく気がしてならないのは僕だけでしょうか？せっかくの機会なのでコツコツやって行きたいと思います。</p>

<p>着手したいことがたくさんあって楽しい限りの今日この頃です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CookieSyncを試してみる]]></title>
    <link href="http://rindai87.github.com/blog/2012/11/25/simple-cookiesync/"/>
    <updated>2012-11-25T20:23:00+09:00</updated>
    <id>http://rindai87.github.com/blog/2012/11/25/simple-cookiesync</id>
    <content type="html"><![CDATA[<p>ここまでDMPに関して、特にデータの収集面に関しての概要をまとめてきました。</p>

<ul>
<li><a href="http://rindai87.github.com/blog/2012/11/16/how-to-sync-cookie/">CookieSyncについて</a></li>
<li><a href="http://rindai87.github.com/blog/2012/11/17/how-to-collect-in-online/">オンラインデータの収集について</a></li>
<li><a href="http://rindai87.github.com/blog/2012/11/19/how-to-collect-in-offline/">オフラインデータの収集について</a></li>
</ul>


<p>ここまで来るとだんだん自分でも実装したくなってきます。実装方法は色々あるとは思いますが、CookieSyncを実際に試してみたいと思ったので、ものすごくシンプルな構成でCookieSyncを実装してみました。</p>

<h2>構成とシナリオ</h2>

<p>構成というほど大したものでは無いですが、以下の構成及びユーザーの動きを想定しました。</p>

<h3>構成</h3>

<p><img src="/images/simple_sync/sync_image.png"></p>

<ul>
<li>siteA：DMPとCookieSyncを行いたいWebサイト</li>
<li>ユーザー</li>
<li>DMP：siteAのCookieSync相手</li>
</ul>


<h3>シナリオ</h3>

<ol>
<li>siteAにはCookieSync用の1x1pixelの画像を仕込む</li>
<li>ユーザーがsiteAに来訪</li>
<li>ユーザーにはsiteAのCookieがセットされる</li>
<li>siteAからDMPに画像のリクエスト</li>
<li>DMP側ではリクエストからsiteAのCookieIDを取得してユーザーにDMP側のCookieを発行しつつ、1x1の画像を返す</li>
</ol>


<h3>siteA側</h3>

<ul>
<li>cidというCookieでユーザーにIDを振る(1000までの乱数)</li>
<li>DMP.comに対して、/DMP/${cid}.gifという画像をリクエスト</li>
<li>echoしてる部分はCookieの状態を見るためだけなので適宜無視してください</li>
</ul>


<p>``` php siteAのページ (index.php)
&lt;?php
if(!isset($_COOKIE["cid"])) {</p>

<pre><code>    echo "このサイトのCookieを保有していない&lt;br /&gt;&lt;br /&gt;";
    echo "Cookieの生成&lt;br /&gt;";
    $cid = mt_rand(1,1000);
    setcookie("cid", $cid);
    echo "保有しているCookie : cid = " . $cid . "&lt;br /&gt;&lt;br /&gt;";

    echo "DMP用のクエリストリング生成&lt;br /&gt;";
    $query_string = $cid;
    echo "生成されたクエリストリング : " . $query_string;
</code></pre>

<p>} else {</p>

<pre><code>    echo "このサイトのCookieを保有している&lt;br /&gt;";
    echo "保有しているCookie : cid = " . $_COOKIE["cid"] . "&lt;br /&gt;&lt;br /&gt;";

    echo "DMP用のクエリストリング生成&lt;br /&gt;";
    $query_string = $_COOKIE["cid"];
    echo "生成されたクエリストリング : " . $query_string;
</code></pre>

<p>}</p>

<p>?></p>

<p>&lt;!DOCTYPE html>
<html></p>

<p><head>
<meta charset="UTF-8">
<title>Cookie Syncのテスト</title>
</head></p>

<p><body></p>

<pre><code>    &lt;h1&gt;Cookie Syncのテスト&lt;/h1&gt;

    &lt;p&gt;1x1ピクセルのダミー画像を呼ぶ例
   &lt;img src="http://DMP.com/DMP/&lt;?php echo htmlspecialchars($query_string, ENT_NOQUOTES, 'utf-8') ?&gt;.gif" alt="" width="1" heigth="1"&gt;&lt;/p&gt;
</code></pre>

<p></body></p>

<p></html>
```</p>

<h3>DMP側</h3>

<p>単純にphpに対してクエリストリング付与して呼び出したり、画像にクエリストリング付与して呼び出すのでもいいのですが、それっぽい感じにするために.htaccessを使います。</p>

<ul>
<li>/DMP/にて展開しています</li>
<li>画像の置いているディレクトリに.htaccess設置</li>
<li>同じ階層に1x1.phpという画像を返すphpを設置</li>
<li>${cid}.gifへのリクエストを1x1.php?cid=${cid}にRewrite</li>
<li>1x1.phpでは、DMPのCookieの発行(dmpid：1000までの乱数)と、クエリストリングを受け取りマッチング処理</li>
</ul>


<p><code>bash .htaccess
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)\.gif$ /DMP/1x1.php?cid=$1
</code></p>

<p>``` php ${cid}.gifによって実行されるphpプログラム(1x1.php)
&lt;?php
// まだDMP側のIDが振られていないユーザーにCookieを発行
if (!isset($_COOKIE["dmpid"])) {</p>

<pre><code>    $dmpid = mt_rand(1, 1000);
    setcookie("dmpid", $dmpid);
</code></pre>

<p>}</p>

<p>// ここでcidとdmpidをマッチングする処理
// if (isset($_COOKIE["cid"])) {
//      hogehoge;
// }
// DBに格納するとか</p>

<p>// 1x1pixelの画像としてのレスポンスを返す
header('Content-Type: image/gif');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');
header('Pragma: no-cache');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0', false);
echo base64_decode('R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==');
?>
```</p>

<h2>実際に動かしてみる</h2>

<p>VM2台立ち上げて実験してみました。</p>

<ul>
<li>192.168.80.140 : siteA</li>
<li>192.168.80.142 : DMP</li>
</ul>


<p>に対応しています。</p>

<h3>CookieSync前</h3>

<ul>
<li>前の処理のCookieIDが画面には残っていますが、ブラウザはCookieを所有していません。</li>
</ul>


<p><img src="/images/simple_sync/sync_before.png"></p>

<h3>CookieSync後</h3>

<ul>
<li>siteA(192.168.80.140, cid)とDMP(192.168.80.142, dmpid)の双方のCookie情報がブラウザに存在していることが確認できます。</li>
<li>DMP側にはcidとdmpidの双方が渡っています。dmpidを持ってCookieSyncを行なってきたユーザーは特定済みなので、その他の提携サイトからdmpidが振られているユーザーが訪れることで、データのカバー率がどんどん向上していきます。</li>
</ul>


<p><img src="/images/simple_sync/sync_after.png"></p>

<h2>まとめ</h2>

<p>非常にシンプルな形ですが、CookieSyncが実現できることを確認しました。実際は大量のリクエストを捌くためのサーバーチューニングや、データの保持に関するアーキテクチャの検討が必要だと思いますが、とりあえず1x1ピクセルの画像を利用すればいいということの確認ができました。</p>

<p>実利用にはJavascriptのタグを置く形で実現することが多いと思いますが、こちらもまた別の機会に試してみたいと思います。</p>

<p>というわけで、しばらく重めの話が続いたので、少し軽めのお話でした。</p>

<h2>参考</h2>

<p>以下のサイトを参考にしました。</p>

<ul>
<li><a href="http://freesoft.tvbok.com/tips/security/web_beacon.html">本当は怖い？怖くない？Webビーコンの仕組みを知ろう。</a></li>
<li><a href="http://www.pahoo.org/e-soul/privacy/athome/athome-026.shtm">Webビーコンによるアクセス情報収集</a></li>
</ul>

]]></content>
  </entry>
  
</feed>

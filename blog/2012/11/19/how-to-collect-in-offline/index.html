
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>DMPはどのようにCookieデータを収集しているか（オフラインデータ編） - adtech周辺に興味がある人の四方山話</title>
    <meta name="author" content="Norihiro Shimoda">
    
	<meta name="description" content="ここまで これまで２回に渡って、DMPの情報収集のコアであるCookieSyncの紹介と、CookieSyncを使っていかにオンラインデータを収集するかについて見てきました。 DMPはどのようにCookieデータを収集しているか（CookieSync編) &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="adtech周辺に興味がある人の四方山話" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <script src="/javascripts/ajaxify.js"></script>
   
    
    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-41403401-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Norihiro Shimoda
    </div>
</h1>
<br>

<ul id="social-links" style="text-align:center">
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/rindai87" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/blog/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload --> 
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">DMPはどのようにCookieデータを収集しているか（オフラインデータ編）</h2>
	<div class="entry-content"><h2>ここまで</h2>

<p>これまで２回に渡って、DMPの情報収集のコアであるCookieSyncの紹介と、CookieSyncを使っていかにオンラインデータを収集するかについて見てきました。</p>

<ul>
<li><a href="http://rindai87.github.com/blog/2012/11/17/how-to-collect-in-online/">DMPはどのようにCookieデータを収集しているか（CookieSync編)</a></li>
<li><a href="http://rindai87.github.com/blog/2012/11/16/how-to-sync-cookie/">DMPはどのようにCookieデータを収集しているか（オンラインデータ編）</a></li>
</ul>


<p>さらに突っ込んでオフラインのデータをいかにオンラインに持ち込むか、という点についてみていこうと思います。今回もいつものブログの記事<a href="http://www.adopsinsider.com/online-ad-measurement-tracking/data-management-platforms/data-management-part-iv-syncing-offline-data-to-your-dmp/">Data Management Part IV: Syncing Offline Data To Your DMP</a>をベースに話を進めていきます。</p>

<h2>オンラインデータとオフラインデータの比較</h2>

<ul>
<li>オンラインデータは収集が容易な一方で、データの信頼性が乏しい。必ず正しい情報を登録しているわけではない。</li>
<li>Cookieをキーにするという性質上、正確にはユーザー情報ではなくブラウザ情報になっている。一つのブラウザを複数の人が利用している可能性や、１人の人が複数のデバイスやブラウザを利用して情報が断片化している可能性もある。また、ユーザーはブラウザのCookieを削除することができるし、Cookieの利用を禁止することも可能である。</li>
<li>一方、商品の購入履歴、ポイントカードの履歴、ホテルや空港の予約履歴、位置情報など、オフラインの情報は信頼性が非常に高い。そのため、オフラインのデータは非常に価値が高いと言われている。</li>
</ul>


<p>オフラインデータは、データソースとしての信頼性がオンラインデータよりもはるかに高いということですね。</p>

<h2>オフラインデータの価値</h2>

<ul>
<li>オンラインとオフラインのシステムは異なる仕組みで動いているので単純にマッチングを行うことは困難である。</li>
<li>オンライン企業の大半は、プライバシーに対する懸念から明示的には個人を識別可能な情報(Personal-Identifiable Information(PII))を収集しておらず、これは実際の「人」のかわりにCookieを代替している点が表している。</li>
<li>オフラインデータの場合「人」を特定した状態のデータのため、オンラインデータで起きる１つのデバイスを複数人で利用しているかもしれない問題はクリアされる。それは、たとえば同じ住所に住んでいても特定の人に対して郵便を送れるようなものである。</li>
</ul>


<p>つまり、ここではオフラインデータ = 「人」のデータ = PII(Personal-Identifiable Information)、ということでしょう。信頼性の高いデータであるPIIは、マーケターを始めとして書くプレイヤーが喉から手がでるほど欲しいデータの一つだと思います。</p>

<p>で、もう少し話を進めます。結局、いかにしてオフラインの信頼性の高いデータをオンラインでも扱うことを可能にするのか。結論から言うと、ここでもCookieSyncが使われます。オフラインデータをオンラインデータに変換する接点を用意することで、「人」のデータを「Cookie」のデータに変換することが可能になるということです。</p>

<h2>オフラインデータをオンラインデータに持ち込むために</h2>

<ul>
<li>オンラインとオフラインの接点（PIIを持っていて、CookieSync可能であるポイント）が必要である</li>
<li>オンラインデータのCookieIDのように、オフラインデータを統合するためのキーにはemailアドレスが使われることが多い</li>
<li>オフラインデータをオンラインデータに移動することはcookieをマッチングすることである</li>
</ul>


<p>CookieSyncが可能なポイントでCookieSyncを行なっていおいて、データを統合する時にCookieをkeyとしてPIIの情報がわたっていくということですね。また、オフライン同士のデータ統合のkeyにはemailアドレスが使えるというのようです。恐らく氏名や住所、電話番号はdata providerの外部に持ち出せないため、暗号化されたメールアドレスをキーとして利用するのでしょう。</p>

<h2>eBayの例</h2>

<p><a href="http://www.adopsinsider.com/online-ad-measurement-tracking/data-management-platforms/data-management-part-iv-syncing-offline-data-to-your-dmp/">Data Management Part IV: Syncing Offline Data To Your DMP</a>では、eBayが<a href="http://www.adexchanger.com/data-exchanges/ebay/">とあるサービスを終了させるまで</a>は典型的なproviderだったと書いて説明しています。ポイントは２点で、ebayがオンラインサービスと注文管理のシステムの２つがあったため、オフラインデータをオンラインデータに結びつけることが可能であったということです。</p>

<ul>
<li>ebayはオンラインサービスを行なっているのでユーザーにCookieをセットすることができた。</li>
<li>ebayは注文管理システムも保有しているので、購入ユーザーに対して氏名や住所といったPIIの登録を求めることが可能であった。</li>
<li>上記２点からCookieに紐付くemailを保有数することが可能だった。</li>
<li>Cookieとemailの組みを保有することで、オンラインオフラインを問わずデータの統合が可能になる。</li>
<li>Cookie情報はないがPIIを保有しているオフライン企業は、ebayのCookieID/PIIに自社のPIIを紐付けることで、CookieIDを持つことができる。</li>
</ul>


<p>で、実際ebayはサービスを終了させたわけで、現在データどこがかつてのebayのようなことを行なっているのか、という点に関して、ブログの筆者は以下のように類推しています。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>They’re out of the market, but plenty of other companies have the same data
</span><span class='line'> – any large site with user registration pretty much qualifies. 
</span><span class='line'>I have no idea who is a current source of match data, but I would imagine 
</span><span class='line'>the airline booking sites, large eCommerce sites, and even banks could provide 
</span><span class='line'>the necessary information.</span></code></pre></td></tr></table></div></figure>


<p>飛行機の予約サイト、大手のeコマースや銀行だと予想しているとのこと。どこもPIIとして信頼度の高いデータを保有しているものですし、納得ですね。他には、Web明細の普及によって、クレジットカード会社や、携帯電話の会社なんかも対象になるのでしょう。</p>

<h2>実際にどうやってデータの統合を行うか</h2>

<p>ここまで、概論をだらだらと見てきましたが、現実はかなりシンプルなようです。
<img src="/images/matchservice.png"></p>

<h3>登場人物</h3>

<ul>
<li>マッチサービス：オフラインデータをオンラインデータに紐付ける。カオスマップで言うところのdata aggregatorやDMPが担う役割と思われる。</li>
<li>データプロバイダー：信頼性の高いPII(オフラインデータ)を保有している企業</li>
<li>クライアント：データプロバイダほどの信頼性はないが、オフラインデータを保有している企業。オフラインデータのマネタイズを行うためにマッチサービスを利用する</li>
<li>ユーザー：データプロバイダーが行なっているサービス(飛行機やホテルの予約、銀行のオンライン取引、ネットショッピング）を利用する人</li>
</ul>


<h3>処理の流れ</h3>

<ol>
<li>マッチサービスとデータプロバイダは契約し、データプロバイダーは、ユーザーがよく訪れるページにマッチサービスのピクセルデータを置く</li>
<li>ユーザーがデータプロバイダーのページを訪れると、マッチサービスへのリクエストが発生。ここで、データプロバイダーとマッチサービス間でCookieの交換を実施</li>
<li>後ほど、データプロバイダーはPIIの情報を自システム内のCookieIDとともにマッチサービスに送信する。</li>
<li>このデータ提供によって、データプロバイダは収入を得る。</li>
<li>CookieSyncとPIIの収集プロセスを複数のデータプロバイダに対して実施し、ユーザーのPIIを統合させる</li>
<li>マッチサービスは収集したPIIをもとに、多数のクライアントと同様にCookieSyncをベースにしたデータ交換を行う。多数のクライントの情報が集まれば集まるほど、マッチサービスにはよりカバー率の大きなデータができてくる。</li>
</ol>


<p>この後の流れはCookieSyncと同じです。あるユーザーがすでにマッチサービス側のCookieIDを割り振られている状態でCookieSyncを行うと、どんどん複数のデータソースをつなぎ合わせることができるようになるため、よりユーザーの情報を精緻に見ることが可能にります。かつ、ここでのデータはいわゆるオフラインデータです。また、オフラインデータのキーになるメールアドレスも保有しているため、オフライン側のデータも紐付けようと思えば紐付けられそうですね。あとは、マッチサービスとDMPの間で同様にCookieSyncが行われていれば、DMPまでオフラインデータがたどり着きます。</p>

<h3>どのくらいうまくマッチングできているのか</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Unfortunately, the overlap between sources tends to be small, 
</span><span class='line'>typically 30 – 40% of the total offline records on a good day.</span></code></pre></td></tr></table></div></figure>


<p>上記のような記述がある通り、よくて30%-40%ということなので、実際は10%-20%くらいが使い物になるデータのような気がします。adtechの何かのセッションでもCookieデータは全体の20%くらいしか取得できていない、という話もあったので、オーディエンスデータとして整理できているのは全体の約20%程度、実際に解析した結果、使いのものになるのが10%程度、というのが妥当なラインのような気がします。オーディエンスデータといいつつ、あくまでCookieをもとにしているために「人」ではなく「ブラウザ」の情報ですので、この辺が限界なのかもしれません。</p>

<h2>まとめ</h2>

<p>CookieSyncを利用すれば、オフラインのデータがオンライン(DMP)に持ち込むことが可能だということが分かりました。また、カオスマップで言うところの、data providerやdata aggregatorの役割も具体的に見えてきました。毎度の繰り返しの主張になりますが、技術的に実現可能で、そのデータを欲している、お金にできる、という状況になっているので、やはりこの流れは止めにくい状況でしょう。なかなか裏側は見えてきませんが、セキュアにデータを受け渡すところや、意図せぬところでユーザーが識別されてしまわない配慮など、検討しなければならないことは多岐に渡りそうです。また、個人的には、DMPやマッチサービスがマルチデータソースをシングルデータソースにして扱っていそうなところが、名寄の問題などで一番気になります。プライバシーデータ保護マイニングのようなアプローチが裏で行われているのかどうか、気になりますね。</p>

<p>というわけで、割と駆け足で見てきたDMPがどのようにデータを収集しているかという点ですが、まだこのようにまとまった日本語の記事は世の中に出まわってないと思いますので、是非議論の叩きにしていただければと思います。あと、DMPやdata aggregatorに関する良い感じの情報をお持ちの方は、ぜひ教えていただけるとうれしいですね。</p>

<p>まあここまで来ると「ぼくのかんがえたさいきょうのDMP」とか、「DMP作ったけど何か質問ある？」とか言うエントリを書きたくなるのがエンジニアの性だったりするので、こっそりひっそり何か始めたいなと思う今日この頃です。</p>
</div>

<div class="meta">
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2013

    Norihiro Shimoda
. Powered by <a href="http://octopress.org">Octopress</a> | 
    Theme <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
